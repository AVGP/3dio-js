<!doctype html>
<html>
  <head>
    <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
    <script src="../../../build/3dio.js"></script>
    <script src="https://unpkg.com/aframe-animation-component/dist/aframe-animation-component.min.js"></script>
    <link href="style.css" rel="stylesheet">
  </head>
  <body>
    <div class="controls">
      <input id="inpt-id" placeholder="enter scene id" style="width: 400px;"/>
    </div>
    <a-scene antialias="true" shadow="type: pcfsoft">
    </a-scene>
    <script>

      io3d.config({
        servicesUrl: 'http://localhost:5000/api/v2',
        storageDomainNoCdn: 'archilogic-content-dev.s3-website-eu-west-1.amazonaws.com'
      })

      const id = '19db0769-ab04-4d41-aceb-2b28c7debe30'
      const idInput = document.querySelector('input#inpt-id')
      const sceneEl = document.querySelector('a-scene')

      let addedElement

      idInput.value = id
      loadScene(id)

      idInput.addEventListener('input', function() {
        var sceneId = idInput.value
        if (io3d.utils.uuid.validate(sceneId)) loadScene(sceneId)
        else io3d.ui.message('no valid id', 4000, 'warning')
      })

      function loadScene(id) {
        io3d.scene.getHtml(id)
          .then(result => {
//            if (addedElement) sceneEl.removeChild(addedElement)
//            addedElement = result
            console.log(result)
            result.forEach((elem) => sceneEl.appendChild(elem))
          })
          .catch(error => {
              console.log(error)
          })
      }
    </script>
  </body>
</html>
